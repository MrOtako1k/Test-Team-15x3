<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TEST TEAM - لوحة تحكم الإدارة</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: #000;
            color: #ffffff;
            min-height: 100vh;
            direction: rtl;
        }

        /* خلفية متحركة */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(-45deg, #0a0a0a, #1a0033, #2d1b69, #4338ca);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* هيدر لوحة التحكم */
        .admin-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .admin-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(255, 0, 128, 0.2), transparent);
            animation: rotate 10s linear infinite;
            z-index: -1;
        }

        @keyframes rotate {
            100% { transform: rotate(360deg); }
        }

        .admin-title {
            font-size: 3rem;
            font-weight: 900;
            background: linear-gradient(135deg, #ff0080, #ff10f0, #8b5cf6, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .admin-subtitle {
            font-size: 1.2rem;
            opacity: 0.8;
            margin-bottom: 20px;
        }

        /* إحصائيات سريعة */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.1rem;
            opacity: 0.8;
        }

        .total-requests { color: #4ecdc4; }
        .pending-requests { color: #f093fb; }
        .approved-requests { color: #4ade80; }
        .rejected-requests { color: #f87171; }

        /* أدوات التحكم */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .search-container {
            display: flex;
            gap: 15px;
            flex: 1;
            max-width: 500px;
        }

        .search-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 15px;
            color: white;
            font-size: 1rem;
            backdrop-filter: blur(10px);
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .search-input:focus {
            outline: none;
            border-color: #4ecdc4;
            box-shadow: 0 0 0 3px rgba(78, 205, 196, 0.2);
        }

        .filter-select {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 15px;
            color: white;
            font-size: 1rem;
            backdrop-filter: blur(10px);
            cursor: pointer;
        }

        .filter-select option {
            background: #1a1a1a;
            color: white;
        }

        .refresh-btn {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            border: none;
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.3);
        }

        .refresh-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(78, 205, 196, 0.4);
        }

        /* جدول الطلبات */
        .requests-container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 30px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        .requests-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .requests-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #4ecdc4;
        }

        .requests-count {
            background: rgba(78, 205, 196, 0.2);
            color: #4ecdc4;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .requests-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .requests-table th,
        .requests-table td {
            padding: 15px;
            text-align: right;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .requests-table th {
            background: rgba(255, 255, 255, 0.1);
            font-weight: 700;
            color: #4ecdc4;
            font-size: 1.1rem;
        }

        .requests-table tr {
            transition: background 0.3s ease;
        }

        .requests-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        /* حالة الطلب */
        .status-badge {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            text-align: center;
            min-width: 100px;
        }

        .status-pending {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
        }

        .status-approved {
            background: linear-gradient(135deg, #4ade80, #22c55e);
            color: white;
        }

        .status-rejected {
            background: linear-gradient(135deg, #f87171, #ef4444);
            color: white;
        }

        /* أزرار الإجراءات */
        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .action-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 12px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 80px;
        }

        .approve-btn {
            background: linear-gradient(135deg, #4ade80, #22c55e);
            color: white;
        }

        .reject-btn {
            background: linear-gradient(135deg, #f87171, #ef4444);
            color: white;
        }

        .view-btn {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* نافذة التفاصيل */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(30px);
            border-radius: 25px;
            padding: 40px;
            max-width: 800px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 2px solid rgba(255, 255, 255, 0.2);
            animation: slideUp 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translate(-50%, -30%);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #4ecdc4;
        }

        .close-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .answer-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .answer-question {
            font-size: 1.1rem;
            font-weight: 600;
            color: #4ecdc4;
            margin-bottom: 10px;
        }

        .answer-text {
            font-size: 1rem;
            line-height: 1.6;
            opacity: 0.9;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid rgba(255, 255, 255, 0.1);
        }

        .modal-action-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        /* تحميل البيانات */
        .loading-container {
            text-align: center;
            padding: 50px;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-top: 5px solid #4ecdc4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .no-data {
            text-align: center;
            padding: 50px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 1.2rem;
        }

        /* تنسيق الهاتف المحمول */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .admin-title {
                font-size: 2rem;
            }

            .stats-container {
                grid-template-columns: repeat(2, 1fr);
            }

            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .search-container {
                max-width: none;
                flex-direction: column;
            }

            .requests-table {
                font-size: 0.9rem;
            }

            .requests-table th,
            .requests-table td {
                padding: 10px 5px;
            }

            .action-buttons {
                flex-direction: column;
                gap: 5px;
            }

            .action-btn {
                font-size: 0.8rem;
                padding: 6px 10px;
            }

            .modal-content {
                width: 95%;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="animated-bg"></div>
    
    <div class="container">
        <!-- هيدر لوحة التحكم -->
        <div class="admin-header">
            <div class="admin-title">🔐 لوحة تحكم الإدارة</div>
            <div class="admin-subtitle">TEST TEAM - 15x3 EDITION</div>
            <div class="admin-subtitle">مراجعة وإدارة طلبات الانضمام</div>
        </div>

        <!-- إحصائيات سريعة -->
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-number total-requests" id="totalRequests">0</div>
                <div class="stat-label">إجمالي الطلبات</div>
            </div>
            <div class="stat-card">
                <div class="stat-number pending-requests" id="pendingRequests">0</div>
                <div class="stat-label">قيد المراجعة</div>
            </div>
            <div class="stat-card">
                <div class="stat-number approved-requests" id="approvedRequests">0</div>
                <div class="stat-label">مقبولة</div>
            </div>
            <div class="stat-card">
                <div class="stat-number rejected-requests" id="rejectedRequests">0</div>
                <div class="stat-label">مرفوضة</div>
            </div>
        </div>

        <!-- أدوات التحكم -->
        <div class="controls">
            <div class="search-container">
                <input type="text" id="searchInput" class="search-input" placeholder="🔍 البحث في الطلبات...">
                <select id="statusFilter" class="filter-select">
                    <option value="">جميع الحالات</option>
                    <option value="pending">قيد المراجعة</option>
                    <option value="approved">مقبولة</option>
                    <option value="rejected">مرفوضة</option>
                </select>
            </div>
            <button class="refresh-btn" onclick="loadRequests()">🔄 تحديث</button>
        </div>

        <!-- جدول الطلبات -->
        <div class="requests-container">
            <div class="requests-header">
                <div class="requests-title">📋 الطلبات المرسلة</div>
                <div class="requests-count" id="requestsCount">0 طلب</div>
            </div>
            
            <div id="requestsContent">
                <div class="loading-container">
                    <div class="loading-spinner"></div>
                    <div>جاري تحميل الطلبات...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- نافذة التفاصيل -->
    <div class="modal" id="detailsModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">تفاصيل الطلب</div>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div id="modalContent">
                <!-- محتوى التفاصيل -->
            </div>
        </div>
    </div>

    <script>
        // بيانات وهمية للطلبات (في التطبيق الحقيقي ستأتي من قاعدة البيانات)
        let allRequests = [
            {
                id: 1,
                referenceNumber: "15X3-12345678",
                submissionDate: "2024-01-15",
                status: "pending",
                answers: {
                    1: "أحمد محمد",
                    2: "22",
                    3: "نعم",
                    4: "PC",
                    5: "برمجة المواقع",
                    6: "فريق التطوير",
                    7: "نعم",
                    8: "هندسة الحاسوب",
                    9: "نعم",
                    10: "أريد أن أكون جزءاً من فريق متطور ومبدع",
                    11: "نعم"
                }
            },
            {
                id: 2,
                referenceNumber: "15X3-87654321",
                submissionDate: "2024-01-14",
                status: "approved",
                answers: {
                    1: "فاطمة العلوي",
                    2: "19",
                    3: "لا",
                    4: "MOBILE",
                    5: "التصميم الجرافيكي",
                    6: "لم أنضم من قبل",
                    7: "لا",
                    8: "الفنون التطبيقية",
                    9: "نعم",
                    10: "أحب العمل في بيئة إبداعية ومتطورة",
                    11: "نعم"
                }
            },
            {
                id: 3,
                referenceNumber: "15X3-11223344",
                submissionDate: "2024-01-13",
                status: "rejected",
                answers: {
                    1: "محمد الحسن",
                    2: "25",
                    3: "نعم",
                    4: "PC",
                    5: "التسويق الرقمي",
                    6: "فريق التسويق الرقمي",
                    7: "نعم",
                    8: "إدارة الأعمال",
                    9: "لا",
                    10: "أريد تطوير مهاراتي",
                    11: "لا"
                }
            }
        ];

        const questions = [
            "ACHENO SMIYTEK؟",
            "CHE7AL F3EMREK",
            "WACHE KENTI DA5EL M3A CHI TEAM O5ERA؟",
            "ACHEMEN JIHAZ 3ENDEK",
            "ACHENO KAT3ERF DIR",
            "ACHE NAHIYA TEAM LI KENTI DA5OL M3AHA",
            "WACHE FAYT LIK DEVLOPETI CHI L3AYBA",
            "ACHE NAHOWA MASAR DIRASI DYALK",
            "WACHE KAT3ETA9ED ILA D5OLTI AL HAD TEAM WACHE HATSTAMR FIHA",
            "ACHE NAHIYA RISALA DYALK LI BITI TWOJHEHA AL MASEOLIN",
            "WACHE HATB9A DAYMAN DAYR TAG 15x3 LILABADE"
        ];

        let filteredRequests = [...allRequests];

        function loadRequests() {
            setTimeout(() => {
                updateStats();
                renderRequests();
            }, 1000);
        }

        function updateStats() {
            const total = allRequests.length;
            const pending = allRequests.filter(r => r.status === 'pending').length;
            const approved = allRequests.filter(r => r.status === 'approved').length;
            const rejected = allRequests.filter(r => r.status === 'rejected').length;

            document.getElementById('totalRequests').textContent = total;
            document.getElementById('pendingRequests').textContent = pending;
            document.getElementById('approvedRequests').textContent = approved;
            document.getElementById('rejectedRequests').textContent = rejected;
        }

        function renderRequests() {
            const container = document.getElementById('requestsContent');
            document.getElementById('requestsCount').textContent = `${filteredRequests.length} طلب`;

            if (filteredRequests.length === 0) {
                container.innerHTML = '<div class="no-data">لا توجد طلبات تطابق معايير البحث</div>';
                return;
            }

            const table = document.createElement('table');
            table.className = 'requests-table';
            
            table.innerHTML = `
                <thead>
                    <tr>
                        <th>رقم المرجع</th>
                        <th>الاسم</th>
                        <th>العمر</th>
                        <th>الجهاز</th>
                        <th>تاريخ الإرسال</th>
                        <th>الحالة</th>
                        <th>الإجراءات</th>
                    </tr>
                </thead>
                <tbody>
                    ${filteredRequests.map(request => `
                        <tr>
                            <td>${request.referenceNumber}</td>
                            <td>${request.answers[1]}</td>
                            <td>${request.answers[2]}</td>
                            <td>${request.answers[4]}</td>
                            <td>${new Date(request.submissionDate).toLocaleDateString('ar-SA')}</td>
                            <td>
                                <span class="status-badge status-${request.status}">
                                    ${getStatusText(request.status)}
                                </span>
                            </td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn" onclick="viewDetails(${request.id})">
                                        👁️ عرض
                                    </button>
                                    ${request.status === 'pending' ? `
                                        <button class="action-btn approve-btn" onclick="approveRequest(${request.id})">
                                            ✅ قبول
                                        </button>
                                        <button class="action-btn reject-btn" onclick="rejectRequest(${request.id})">
                                            ❌ رفض
                                        </button>
                                    ` : ''}
                                </div>
                            </td>
                        </tr>
                    `).join('')}
                </tbody>
            `;

            container.innerHTML = '';
            container.appendChild(table);
        }

        function getStatusText(status) {
            switch(status) {
                case 'pending': return 'قيد المراجعة';
                case 'approved': return 'مقبول';
                case 'rejected': return 'مرفوض';
                default: return status;
            }
        }

        function viewDetails(requestId) {
            const request = allRequests.find(r => r.id === requestId);
            if (!request) return;

            const modalContent = document.getElementById('modalContent');
            
            modalContent.innerHTML = `
                <div class="answer-item">
                    <div class="answer-question">رقم المرجع:</div>
                    <div class="answer-text">${request.referenceNumber}</div>
                </div>
                <div class="answer-item">
                    <div class="answer-question">تاريخ الإرسال:</div>
                    <div class="answer-text">${new Date(request.submissionDate).toLocaleDateString('ar-SA')}</div>
                </div>
                <div class="answer-item">
                    <div class="answer-question">الحالة:</div>
                    <div class="answer-text">
                        <span class="status-badge status-${request.status}">
                            ${getStatusText(request.status)}
                        </span>
                    </div>
                </div>
                <hr style="margin: 30px 0; border: 1px solid rgba(255, 255, 255, 0.1);">
                ${questions.map((question, index) => `
                    <div class="answer-item">
                        <div class="answer-question">${index + 1}. ${question}</div>
                        <div class="answer-text">${request.answers[index + 1] || 'لا توجد إجابة'}</div>
                    </div>
                `).join('')}
                
                ${request.status === 'pending' ? `
                    <div class="modal-actions">
                        <button class="modal-action-btn approve-btn" onclick="approveRequest(${request.id}); closeModal();">
                            ✅ قبول الطلب
                        </button>
                        <button class="modal-action-btn reject-btn" onclick="rejectRequest(${request.id}); closeModal();">
                            ❌ رفض الطلب
                        </button>
                    </div>
                ` : ''}
            `;

            document.getElementById('detailsModal').style.display = 'block';
        }

        function approveRequest(requestId) {
            const request = allRequests.find(r => r.id === requestId);
            if (request) {
                request.status = 'approved';
                filterRequests();
                updateStats();
                renderRequests();
                alert(`✅ تم قبول طلب ${request.answers[1]} بنجاح!`);
            }
        }

        function rejectRequest(requestId) {
            const request = allRequests.find(r => r.id === requestId);
            if (request) {
                request.status = 'rejected';
                filterRequests();
                updateStats();
                renderRequests();
                alert(`❌ تم رفض طلب ${request.answers[1]}.`);
            }
        }

        function closeModal() {
            document.getElementById('detailsModal').style.display = 'none';
        }

        function filterRequests() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;

            filteredRequests = allRequests.filter(request => {
                const matchesSearch = !searchTerm || 
                    request.referenceNumber.toLowerCase().includes(searchTerm) ||
                    request.answers[1].toLowerCase().includes(searchTerm) ||
                    request.answers[2].toLowerCase().includes(searchTerm);
                
                const matchesStatus = !statusFilter || request.status === statusFilter;
                
                return matchesSearch && matchesStatus;
            });

            renderRequests();
        }